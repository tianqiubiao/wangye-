<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>项目详情-预约中-未预约</title>
    <!--<meta name="viewport"-->
          <!--content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">-->
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=2.0"/>
    <script>
        ;(function (doc, win) {
            var docEl     = doc.documentElement,statWidth = docEl.clientWidth,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc    = function () {
                    var clientWidth = docEl.clientWidth;
                    if (!clientWidth) return;
                    docEl.style.fontSize = 100 * (clientWidth /360) + 'px';
                };
            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
    </script>
    <link rel="stylesheet" href="public/stylesheets/app.css">
    <style>
        .house-fixed{
        }
    </style>
</head>
<body>
<div class="min-height100 bgG8 padTop25">
  <input type="datetime-local" placeholder="请选择" style="padding: .1rem 0;height:.5rem;font-size:.2rem">
    <div class="padLr10">
        <div class="row relative">
            <div class="left width100">
                <div class="font14 colorG4 text-left">2016-BJ-0001 <span class="colorB1 right"><a href="ssf.html">查看合同</a></span></div>
                <div class="font18 colorG1 text-left line_height30">旭辉街区26号</div>
            </div>
        </div><div class="row relative">
            <div class="left width100">
                <div class="font14 colorG4 text-left">2016-BJ-0001 <span class="colorB1 right"><a href="scal.html">查看合同</a></span></div>
                <div class="font18 colorG1 text-left line_height30">旭辉街区26号</div>
            </div>
        </div>
        <!--分割线-->
        <div class="split-line"></div>
        <div class="font14 line30">
            <span class="colorG5">预约剩余时间：</span>
            <span class="colorC1">28时20分19秒</span>
        </div>
        <div class="row height800">
            <div class="text-left left width30">
                <div class="row">
                    <span class="colorR1 font42 left">50</span>
                    <span class="font22 colorR1 left line5-6">%</span>
                </div>
                <div class="font14 colorG5">预计年化收益</div>
            </div>
            <div class="text-center left width30">
                <div class="row">
                    <span class="colorG2 font42 left">12</span>
                    <span class="font22 colorG2 left line5-6">个月</span>
                </div>
                <div class="font14 colorG5">预计周期</div>
            </div>
            <div class="text-right left width30">
                <div class="row">
                    <span class="font16 colorG2 right line5-6">1000万</span>
                </div>
                <div class="font14 colorG5">项目估值</div>
            </div>
        </div>
    </div>
    <!--图片-->
    <div class="house-pic marTop15" id="house_pic">
        <div class="top-pic">
            <ul class="row">
                <li>
                    <div><img src="public/images/b0.jpg" alt=""></div>
                    <div><img src="public/images/pic-iumg.png" alt=""></div>
                </li>
                <li>
                    <div><img src="public/images/b1.jpg" alt=""></div>
                    <div><img src="public/images/pic-iumg.png" alt=""></div>
                </li>
                <li>
                    <div><img src="public/images/b2.jpg" alt=""></div>
                    <div><img src="public/images/pic-iumg.png" alt=""></div>
                    <div><img src="public/images/b3.jpg" alt=""></div>
                    <div><img src="public/images/pic-iumg.png" alt=""></div>
                    <div><img src="public/images/b4.jpg" alt=""></div>
                    <div><img src="public/images/pic-iumg.png" alt=""></div>
                </li>
                <li>
                    <div><img src="public/images/b5.jpg" alt=""></div>
                    <div><img src="public/images/pic-iumg.png" alt=""></div>
                </li>
                <li>
                    <div><img src="public/images/b3.jpg" alt=""></div>
                    <div><img src="public/images/pic-iumg.png" alt=""></div>
                </li>
            </ul>
        </div>
        <div class="item-lists">1/10</div>
        <div class="bot-pic">
            <ul class="row">
                <li class="colorWhite">外立面</li>
                <li>内部图</li>
                <li>交通图</li>
                <li>平面</li>
                <li>配套图</li>
            </ul>
        </div>
    </div>

    <div class="bgWhite colorC1 font16 text-center line30">项目详情</div>
    <div class="padTb15 padLr10 font14 line_height25">
        <div class="colorG1">
            <span class="colorG4">交易方式：</span>股权
        </div>
        <div class="colorG1">
            <span class="colorG4">项目地点：</span>**
        </div>
        <div class="colorG1">
            <span class="colorG4">土地性质：</span>
            住宅
        </div>
        <div class="colorG1">
            <span class="colorG4">产权年限：</span>
            70年
        </div>
        <div class="colorG1">
            <span class="colorG4">项目性质：</span>
            新楼盘
        </div>
        <div class="colorG1">
            <span class="colorG4">交易标的总建筑面积：</span>
            ***平方米
        </div>
        <div class="colorG1">
            <span class="colorG4">交易金额：</span>
            **万元
        </div>
        <div class="colorG1">
            <span class="colorG4">楼高：</span>
            **层
        </div>
    </div>
    <div class="bgWhite colorC1 font16 text-center line30">基本信息</div>
    <div class="table padLr95 font14 marTop15">
        <table class="text-center width100" cellspacing="10" >
            <thead>
            <tr class="colorG4">
                <th>业态</th>
                <th>层数</th>
                <th>物业</th>
            </tr>
            </thead>
            <tbody class="colorG1">
            <tr>
                <td>商业</td>
                <td>1-3</td>
                <td>6元/月/㎡</td>
            </tr>
            <tr>
                <td>公寓</td>
                <td>4-20</td>
                <td>5元/月/㎡</td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="padTb15 padLr10 font14 line_height25">
        <div class="colorG1">
            <span class="colorG4">水电：</span>商水商电
        </div>
        <div class="colorG1">
            <span class="colorG4">燃气：</span>无
        </div>
        <div class="colorG1">
            <span class="colorG4">主力户型：</span>

        </div>
        <div class="colorG1">
            <span class="colorG4">停车位：</span>

        </div>
        <div class="colorG1">
            <span class="colorG4">租赁情况：</span>主要租户、租金、租赁年限（仅限二手）

        </div>
        <div class="colorG1">
            <span class="colorG4">债务债权：</span>

        </div>
        <div class="colorG1">
            <span class="colorG4">周边情况：</span>交通、教育、医疗、银行、超市、娱乐、公园等（文字描述+图片）
        </div>
        <img src="public/images/pic-iumg.png" alt="" class="marAuto padTb15">
        <div class="colorG1">
            <span class="colorG4">周边竞品：</span>楼盘名称、主力户型、层高、产品类型（平层、LOFT、联合办公等）、价格、价格环比（增长/下降/持平）、去化速度（文字描述+图片）
            <img src="public/images/pic-iumg.png" alt="" class="marAuto padTb15">
            楼盘名称、主力户型、层高、产品类型（平层、LOFT、联合办公等）、
            <img src="public/images/pic-iumg.png" alt="" class="marAuto padTb15">
        </div>
    </div>
</div>
<div style=" background:url(public/images/Loading.gif) no-repeat center;display: none"></div>
<div class="house-fixed">

</div>
</body>
</html>
<script src="public/javascripts/app.js"></script>
<!--<script src="public/javascripts/move.js"></script>-->
<script src="public/javascripts/addEvent.js"></script>
<script>
    var pic_top_ul = query('.house-pic .top-pic ul'),
            pic_img = queryAll('.house-pic .top-pic img'),
            pic_top_li = queryAll('.house-pic .top-pic li'),
            pic_bot_li = queryAll('.house-pic .bot-pic li'),
            house_fixed=query('.house-fixed'),
            left,
            startLeft = 0,
            curT = 0,
            step = 0, count = pic_img.length,
            item_lists = query('.item-lists'),
            outerWidth = document.body.clientWidth || document.documentElement.clientWidth,
            duration = 300,
            time = 0,
            timer,
            timer2,
            targetObj = {},
            changeObj = {},
            beginObj = {},
            ary_item = 0,
            dix,
            move_tar;
    var ClickNum = 0;
    pic_top_ul.style.width = pic_img.length * outerWidth + 'px';
    //t:时间  b:开始位置  c:目标位置  d：时间
    var effect = {
        //匀速
        Linear: function (t, b, c, d) {
            return c * t / d + b;
        },
        //指数衰减的反弹缓动
        Bounce: {
            easeIn: function (t, b, c, d) {
                return c - effect.Bounce.easeOut(d - t, 0, c, d) + b;
            },
            easeOut: function (t, b, c, d) {
                if ((t /= d) < (1 / 2.75)) {
                    return c * (7.5625 * t * t) + b;
                } else if (t < (2 / 2.75)) {
                    return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
                } else if (t < (2.5 / 2.75)) {
                    return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
                } else {
                    return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
                }
            },
            easeInOut: function (t, b, c, d) {
                if (t < d / 2) {
                    return effect.Bounce.easeIn(t * 2, 0, c, d) * .5 + b;
                }
                return effect.Bounce.easeOut(t * 2 - d, 0, c, d) * .5 + c * .5 + b;
            }
        },
        //二次方的缓动
        Quad: {
            easeIn: function (t, b, c, d) {
                return c * (t /= d) * t + b;
            },
            easeOut: function (t, b, c, d) {
                return -c * (t /= d) * (t - 2) + b;
            },
            easeInOut: function (t, b, c, d) {
                if ((t /= d / 2) < 1) {
                    return c / 2 * t * t + b;
                }
                return -c / 2 * ((--t) * (t - 2) - 1) + b;
            }
        },
        //三次方的缓动
        Cubic: {
            easeIn: function (t, b, c, d) {
                return c * (t /= d) * t * t + b;
            },
            easeOut: function (t, b, c, d) {
                return c * ((t = t / d - 1) * t * t + 1) + b;
            },
            easeInOut: function (t, b, c, d) {
                if ((t /= d / 2) < 1) {
                    return c / 2 * t * t * t + b;
                }
                return c / 2 * ((t -= 2) * t * t + 2) + b;
            }
        },
        //四次方的缓动
        Quart: {
            easeIn: function (t, b, c, d) {
                return c * (t /= d) * t * t * t + b;
            },
            easeOut: function (t, b, c, d) {
                return -c * ((t = t / d - 1) * t * t * t - 1) + b;
            },
            easeInOut: function (t, b, c, d) {
                if ((t /= d / 2) < 1) {
                    return c / 2 * t * t * t * t + b;
                }
                return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
            }
        },
        //五次方的缓动
        Quint: {
            easeIn: function (t, b, c, d) {
                return c * (t /= d) * t * t * t * t + b;
            },
            easeOut: function (t, b, c, d) {
                return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
            },
            easeInOut: function (t, b, c, d) {
                if ((t /= d / 2) < 1) {
                    return c / 2 * t * t * t * t * t + b;
                }
                return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
            }
        },
        //正弦曲线的缓动
        Sine: {
            easeIn: function (t, b, c, d) {
                return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
            },
            easeOut: function (t, b, c, d) {
                return c * Math.sin(t / d * (Math.PI / 2)) + b;
            },
            easeInOut: function (t, b, c, d) {
                return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
            }
        },
        //指数曲线的缓动
        Expo: {
            easeIn: function (t, b, c, d) {
                return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
            },
            easeOut: function (t, b, c, d) {
                return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
            },
            easeInOut: function (t, b, c, d) {
                if (t == 0) return b;
                if (t == d) return b + c;
                if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
                return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
            }
        },
        //圆形曲线的缓动
        Circ: {
            easeIn: function (t, b, c, d) {
                return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
            },
            easeOut: function (t, b, c, d) {
                return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
            },
            easeInOut: function (t, b, c, d) {
                if ((t /= d / 2) < 1) {
                    return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
                }
                return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
            }
        },
        //超过范围的三次方缓动
        Back: {
            easeIn: function (t, b, c, d, s) {
                if (s == undefined) s = 1.70158;
                return c * (t /= d) * t * ((s + 1) * t - s) + b;
            },
            easeOut: function (t, b, c, d, s) {
                if (s == undefined) s = 1.70158;
                return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
            },
            easeInOut: function (t, b, c, d, s) {
                if (s == undefined) s = 1.70158;
                if ((t /= d / 2) < 1) {
                    return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
                }
                return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
            }
        },
        //指数衰减的正弦曲线缓动
        Elastic: {
            easeIn: function (t, b, c, d, a, p) {
                if (t == 0) return b;
                if ((t /= d) == 1) return b + c;
                if (!p) p = d * .3;
                var s;
                !a || a < Math.abs(c) ? (a = c, s = p / 4) : s = p / (2 * Math.PI) * Math.asin(c / a);
                return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
            },
            easeOut: function (t, b, c, d, a, p) {
                if (t == 0) return b;
                if ((t /= d) == 1) return b + c;
                if (!p) p = d * .3;
                var s;
                !a || a < Math.abs(c) ? (a = c, s = p / 4) : s = p / (2 * Math.PI) * Math.asin(c / a);
                return (a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);
            },
            easeInOut: function (t, b, c, d, a, p) {
                if (t == 0) return b;
                if ((t /= d / 2) == 2) return b + c;
                if (!p) p = d * (.3 * 1.5);
                var s;
                !a || a < Math.abs(c) ? (a = c, s = p / 4) : s = p / (2 * Math.PI) * Math.asin(c / a);
                if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
                return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
            }
        }
    };
    var  x, y, x1, y1, c, scl = query('#scl'), num = 1, str, bool = false, bool0=true;;
    //缩放中心点;屏幕中心点
    var centerSco, pageSco;
    //屏幕宽度；
    var winW = document.documentElement.clientWidth || document.body.clientWidth;
    var winH = document.documentElement.clientHeight || document.body.clientHeight;
    //    pageSco=(winW*winW)+(winH*winH)
    pageSco = {x: winW / 2, y: winH / 2};
    for (var i = 0; i < pic_bot_li.length; i++) {
        pic_bot_li[i].style.width = 100 / pic_bot_li.length + '%';
        (function (i) {
            pic_bot_li[i].setAttribute('pic_img_length', pic_top_li[i].querySelectorAll('img').length);
            pic_bot_li[i].addEventListener('click', function () {
                                               var st = 0;
                                               prevAll(pic_top_li[i]).forEach(function (o) {
                                                   st += o.querySelectorAll('img').length;
                                               });
                                               step = st;
                                               anim(pic_top_ul, {left: -st * outerWidth});
                                               changeList();
                                               changeTip();
                                           }
            )
        })(i)
    }
    pic_top_ul.addEventListener('touchstart', function (e) {
        startLeft = e.targetTouches[0].pageX;
        left = getCss(pic_top_ul, 'left');
        //console.log(e.touches)
    });
    pic_top_ul.addEventListener('touchmove', function (e) {
        e.preventDefault();
        var endLeft = e.targetTouches[0].pageX;
        curT = endLeft - startLeft;
        pic_top_ul.style.left = left + curT + 'px'
    });
    pic_top_ul.addEventListener('touchend', function (e) {
        if (curT > 10) {
            if (step === 0) {
                anim(pic_top_ul, {left: 0});
            } else {
                anim(pic_top_ul, {left: -(step-1) * (outerWidth)});
                curT = 0;
                step--;
                changeList();
                changeTip();
            }
        } else if (curT < -10) {
            if (step === count - 1) {
                anim(pic_top_ul, {left: -(pic_img.length - 1) * outerWidth});
                return;
            } else {
                anim(pic_top_ul,  {left: -(step+1) * (outerWidth)});
                curT = 0;
                step++;
                changeList();
                changeTip();
            }
        } else {
            anim(pic_top_ul,  {left: -(step) * outerWidth});
            return;
        }
    });
    for(var j= 0,len=pic_img.length;j<len;j++){
        (function(j){
            pic_img[j].onclick=function(){
                var litLeft=getCss(pic_top_ul,"left");
                var imgs=queryAll('.house-pic .top-pic div'),str='',dix;
                setCss(document.body||document.documentElement,'overflow','hidden');
                if(bool0){
                    str+='<div style="width:'+ getCss(pic_top_ul,"width")+'px;'+'left:'+  litLeft+'px" class="row absolute" id="fixUl">';
                    for(var k=0;k<imgs.length;k++){
                        str+='<div style="background: url(public/images/Loading.gif) no-repeat center"><img src="'+ pic_img[k].src+'" alt="" style=";opacity: 0"></div>';
                        //str+='<div style="background: url('+pic_img[k].src+') no-repeat center;    background-size: 100%;"><img style=";display: none"></div>';
                    }
                    str+='</div>';
                    house_fixed.innerHTML=str;
                    bool0=false;
                    house_fixed.style.display='block';
                    var oimgs=house_fixed.querySelectorAll('img');
                    for(var x=0;x<len;x++){
                        (function(x){
                            queryAll('#fixUl div')[x].onclick=function(){
                                house_fixed.style.display='none';
                            };
                            oimgs[x].onload = function () {
                                oimgs[x].style.maxWidth = '200%';
                                var startLeft, startTop, curL, curT, Left, Top;
                                var xh=getCss(oimgs[x],'height')/2+'px';
                                setCss(oimgs[x],'margin-top','-'+xh);
                                setCss(oimgs[x],'opacity',1);
                                oimgs[x].addEventListener('touchstart', function (e) {
                                                        if (e.touches.length === 2) {
                                                            var a, b, sb, sc;
                                                            y = e.targetTouches[0].pageY;
                                                            x = e.targetTouches[0].pageX;
                                                            y1 = e.targetTouches[1].pageY;
                                                            x1 = e.targetTouches[1].pageX;
                                                            //计算三角两边;
                                                            sb = x > x1 ? x - x1 : x1 - x;
                                                            sa = y > y1 ? y - y1 : y1 - y;
                                                            c = sb * sb + sa * sa;
                                                            centerSco = {x: sb / 2, y: sa / 2};
//                                          div.innerHTML = '手指数：' + e.touches.length + '<br>手指间距：' + Math.sqrt(c) + '<br>初始间距：' + Math.sqrt(c) + '<br>num:' + num + '<br>屏幕坐标: x:' + pageSco.x + ' y' + pageSco.y + '<br>缩放坐标： x：' + centerSco.x + ' y:' + centerSco.y;

                                                        } else if (e.touches.length === 1) {
                                                            e.preventDefault();
                                                            ClickNum = ClickNum + 1;
                                                            var timer = setTimeout(callBack, 300);
                                                            //双击放大
                                                            function callBack() {
                                                                if (ClickNum == 2) {
                                                                    console.log('dblclick');
                                                                    var a = oimgs[x].style.width;
                                                                    if (a === winW*2) {
                                                                        anim(oimgs[x], {width: winW, marginLeft: '-176.5', marginTop: '-110', left: winW/2, top: winH/2});
                                                                        bool = false;
                                                                    } else {
                                                                        bool = true;
                                                                    }
                                                                } else if (ClickNum == 1) {
                                                                    console.log('click');
                                                                }
                                                                ClickNum = 0;
                                                            }
                                                            if (bool) {
                                                                startLeft = e.targetTouches[0].pageX;
                                                                startTop = e.targetTouches[0].pageY;
                                                                Left = getCss(oimgs[x], 'left');
                                                                Top = getCss(oimgs[x], 'top');
//                                          console.log(Left+','+Top)
                                                            }
                                                            else {
                                                            }
                                                        }
                                                    }
                                );
                                oimgs[x].addEventListener('touchmove', function (e) {
                                                        e.preventDefault();
                                                        if (e.touches.length === 2) {
                                                            bool = true;
                                                            var t, f, t1, f1, a, b, ea, eb, ec;
                                                            t = e.targetTouches[0].pageY;
                                                            t1 = e.targetTouches[1].pageY;
                                                            f1 = e.targetTouches[1].pageX;
                                                            f = e.targetTouches[0].pageX;
                                                            //放大、缩小值为对立的；a:y轴  ，b:x轴   c：斜边；
                                                            var q, wid, scaling, scal;
                                                            ea = t > t1 ? t - t1 : t1 - t;
                                                            eb = f > f1 ? f - f1 : f1 - f;
                                                            ec = ea * ea + eb * eb;
                                                            centerSco = {x: eb / 2, y: ea / 2};
                                                            if (ec > c) {//放大
                                                                c = ec;
                                                                wid = parseFloat(window.getComputedStyle(oimgs[x], null)['width']);
                                                                scal = wid + parseFloat(num);
                                                                oimgs[x].style.width = scaling + 'px';
                                                                oimgs[x].style.marginLeft = -(wid + parseFloat(num)) / 2 + 'px';
//放大百分比

                                                                scaling = scal / wid;

                                                                q = '放大'
                                                            } else if (c > ec) {//缩小
                                                                c = ec;
                                                                wid = parseFloat(window.getComputedStyle(oimgs[x], null)['width']);
                                                                scal = wid - parseFloat(num);
                                                                oimgs[x].style.width = wid - parseFloat(num) + 'px';
                                                                oimgs[x].style.marginLeft = -(wid + parseFloat(num)) / 2 + 'px';
                                                                scaling = scal / wid;
                                                                q = '缩小'
                                                            } else {
                                                                q = '无'
                                                            }

//                                          div.innerHTML = '手指数：' + e.touches.length + '<br>手指间距：' + Math.sqrt(ec) + '<br>状态：' + q + '<br>图片宽:' + window.getComputedStyle(img, null)['width'] + '<br>num:' + num + '<br>屏幕坐标: x:' + pageSco.x + ' y' + pageSco.y + '<br>缩放坐标： x：' + centerSco.x + ' y:' + centerSco.y;
//                                          div.innerHTML = '手指数：' + e.touches.length + '<br>手指间距：' + Math.sqrt(ec) + '<br>状态：' + q + '<br>图片宽:' + window.getComputedStyle(img, null)['width'] + '<br>num:' + num + '<br>屏幕坐标: x:' + pageSco.x + ' y' + pageSco.y + '<br>缩放坐标： x：' + centerSco.x + ' y:' + centerSco.y;
//                                                            div.innerHTML = scaling;
                                                            return
                                                        }
                                                        if (bool && e.touches.length === 1) {
//                                          e.preventDefault();
                                                            var endLeft = e.targetTouches[0].pageX;
                                                            var endTop = e.targetTouches[0].pageY;
                                                            curL = endLeft - startLeft;
                                                            curT = endTop - startTop;
                                                            oimgs[x].style.left = Left + curL + 'px';
                                                            oimgs[x].style.top = Top + curT + 'px';

                                                        }
                                                    }
                                );
                                oimgs[x].addEventListener('touchend', function (e) {
//                                      div.innerHTML = '手指数：' + e.touches.length + '<br>手指间距：'+0+'<br>初始间距：'+c+'<br>图片宽:'+window.getComputedStyle(img,null)['width']+'<br>num:'+num+'<br>屏幕坐标: x:'+pageSco.x+' y'+pageSco.y+'<br>缩放坐标： x：'+centerSco.x+' y:'+centerSco.y;;
                                                        c = 0;

                                                    }
                                )
                            };
                        })(x)
                        var xh=getCss(oimgs[x],'height')/2+'px';
                        setCss(oimgs[x],'margin-top','-'+xh)
                    }
                }else {
                    setCss(query('#fixUl'),'left',litLeft);
                    house_fixed.style.display='block';
                }
                dix= query('#fixUl'),dix_img=queryAll('.house-fixed img'),step2=step;
                dix.addEventListener('touchstart', function (e) {
                    //alert(e.touches.length)
                    if(e.touches.length===2){

                    }else {
                        startLeft = e.targetTouches[0].pageX;
                        left = getCss(dix, 'left');
                    }
                });
                dix.addEventListener('touchmove', function (e) {
                    e.preventDefault();
                    if(e.touches.length===2){
                    }else {
                        var endLeft = e.targetTouches[0].pageX;
                        curT = endLeft - startLeft;
                        dix.style.left = left + curT + 'px'
                    }
                });
                dix.addEventListener('touchend', function (e) {
                    //console.log(e.targetTouches)
                    this.width++
                    if(e.touches.length===2){
                        var that
                        if(this.tagName.toLocaleLowerCase()==='img'){
                            that=this;
                        }else if(this.firstElementChild.tagName.toLocaleLowerCase()==='img'){
                            that=this.firstElementChild
                        }else {
                            return
                        }
                        that.width++;

                    }else {
                        if (curT > 10) {
                            if (step2 === 0) {
                                anim(dix,  {left: 0});
                            } else {
                                anim(dix,  {left: -(step2) * (outerWidth)});
                                curT = 0;
                                step2--;
                            }
                        } else if (curT < -10) {
                            if (step2 === count - 1) {
                                anim(dix,  {left: -(dix_img.length - 1) * outerWidth});
                                return;
                            } else {
//                                console.log(step2)
                                anim(dix, {left: -(step2+1) * (outerWidth)})
                                curT = 0;
                                step2++;
                            }
                        } else if (curT === 0) {
                            //house_fixed.style.display='none';
                        } else {
                            anim(dix, {left: -(step2) * outerWidth})
                            return;
                        }
                    }
                });
            }
        })(j)
    }

    //    str+='<select style="width: 100%;position: fixed;top: 0;color: #fff;" class="bgG2" id="scl">'
    //    img.onclick = function (e) {
    //        e.preventDefault();
    //        ClickNum = ClickNum + 1;
    //        var timer = setTimeout(callBack, 300);
    //    }\
    function changeList() {
        item_lists.innerHTML = step + 1 + '/' + pic_img.length
    }
    function changeTip() {
        for (var i = 0; i < pic_img.length; i++) {
            if (getIndex(par(par(pic_img[step]))) === i) {
                pic_bot_li[i].className = "colorWhite";
            } else {
                try {

                    pic_bot_li[i].className = " ";
                } catch (e) {
                }
            }
        }
    }
    function anim(ele, a) {
        if (Object.prototype.toString.call(a) === '[object Object]') {
            var targetObj = a, move_tar = ele, changeObj = {}, beginObj = {}, duration = 300, time = 0, timer;
            move();
        } else {
            console.log('参数错误！！！');
            return;
        }
        function linear(t, b, c, d) {
            return c * t / d + b;
        }

        function move() {
            for (var key in targetObj) {
                if (targetObj.hasOwnProperty(key)) {
                    beginObj[key] = getCss(move_tar, key);
                    changeObj[key] = targetObj[key] - beginObj[key];
                }
            }
            window.clearTimeout(timer);

            time += 10;
            if (time >= duration) {
                for (var key in targetObj) {
                    if (targetObj.hasOwnProperty(key)) {
                        setCss(move_tar, key, targetObj[key]);
                    }
                }
                time = 0;
                return;
            }
            for (key in targetObj) {
                if (targetObj.hasOwnProperty(key)) {
                    var curPos = effect.Sine.easeIn(time, beginObj[key], changeObj[key], duration);
                    setCss(move_tar, key, curPos);
                }
            }

            timer = window.setTimeout(move, 10);
        }
    }


    //    AddEvent.on(img, "touchstart", down);
    //    AddEvent.on(box, "touchstart", down);
    function down(e) {
        this["strX"] = e.targetTouches[0].pageX;
        this["strY"] = e.targetTouches[0].pageY;
        this["strL"] = this.offsetLeft;
        this["strT"] = this.offsetTop;

        if (this.setCapture) {
            this.setCapture();
            AddEvent.on(this, 'touchmove', move);
            AddEvent.on(this, 'touchend', up);
        } else {
            var _this = this;
            this.MOVE = function (e) {
                move.call(_this, e);
            };
            this.UP = function (e) {
                up.call(_this, e);
            };
            AddEvent.on(document, 'touchmove', this.MOVE);
            AddEvent.on(document, 'touchend', this.UP);
        }

        window.clearInterval(this.flyTimer);
        window.clearInterval(this.dropTimer);
    }
    function move(e) {
        var curL = e.targetTouches[0].pageX - this["strX"] + this["strL"];
        var curT = e.targetTouches[0].pageY - this["strY"] + this["strT"];
        var minL = 0, minT = 0, maxL = (document.documentElement.clientWidth || document.body.clientWidth) - this.offsetWidth, maxT = (document.documentElement.clientHeight || document.body.clientHeight) - this.offsetHeight;
        curL = curL <= minL ? minL : (curL >= maxL ? maxL : curL);
        curT = curT <= minT ? minT : (curT >= maxT ? maxT : curT);
        this.style.left = curL + "px";
        this.style.top = curT + "px";

        if (!this.pre) {
            this.pre = this.offsetLeft;
        } else {
            this.speedFly = this.offsetLeft - this.pre;
            this.pre = this.offsetLeft;
        }
    }
    function up(e) {
        if (this.releaseCapture) {
            this.releaseCapture();
            AddEvent.off(this, 'touchmove', move);
            AddEvent.off(this, "touchend", up);
        } else {
            AddEvent.off(document, 'touchmove', this.MOVE);
            AddEvent.off(document, 'touchend', this.UP);
        }
        fly.call(this);
        drop.call(this);
    }
    function fly() {
        var _this = this;
        _this.flyTimer = window.setInterval(function () {
                                                if (Math.abs(_this.speedFly) < 0.5) {
                                                    window.clearInterval(_this.flyTimer);
                                                    return;
                                                }

                                                _this.speedFly *= 0.98;
                                                var curL = _this.offsetLeft + _this.speedFly;
                                                var minL = 0, maxL = (document.documentElement.clientWidth || document.body.clientWidth) - _this.offsetWidth;
                                                if (curL >= maxL) {
                                                    _this.style.left = maxL + "px";
                                                    _this.speedFly *= -1;
                                                } else if (curL <= minL) {
                                                    _this.style.left = minL + "px";
                                                    _this.speedFly *= -1;
                                                } else {
                                                    _this.style.left = curL + "px";
                                                }
                                            }, 10
        );
    }
    function drop() {
        var _this = this;
        _this.dragFlag = 0;
        _this.dropTimer = window.setInterval(function () {
                                                 if (_this.dragFlag > 1) {
                                                     window.clearInterval(_this.dropTimer);
                                                     return;
                                                 }

                                                 _this.dropSpeed = !_this.dropSpeed ? 10 : _this.dropSpeed + 10;
                                                 _this.dropSpeed *= 0.98;

                                                 var curT = _this.offsetTop + _this.dropSpeed;
                                                 var maxT = (document.documentElement.clientHeight || document.body.clientHeight) - _this.offsetHeight;
                                                 if (curT >= maxT) {//->到底了
                                                     _this.style.top = maxT + "px";
                                                     _this.dropSpeed *= -1;
                                                     _this.dragFlag++;
                                                 } else {
                                                     _this.style.top = curT + "px";
                                                     _this.dragFlag = 0;
                                                 }
                                             }, 10
        );
    }


</script>
